language: java
addons:
  sonarcloud:
    organization: extreme-startup-taf
before_install:
- chmod +x mvnw
install:
- "./mvnw clean install"
script:
- "./mvnw clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar"
- "./mvnw -P generate generate-test-sources"
- "./mvnw -P run integration-test -Dselenide.remote=http://35.234.68.105:4444/wd/hub"
after_script:
- "./mvnw -P generate-report post-integration-test"
deploy:
  provider: pages
  skip-cleanup: true
  keep-history: true
  github-token:
    secure: iAgHK3ib4a/kgvM9YEma2jZhmp5HIoh+WUcO8l0MlBLksr/DTN/ou8Rk3gJcyaWFWW2tWZGXWXd9QyP4697iqcGg7s6LNID/xY0Pmil+7Wi1i+YcRxs0StDAlaisietfZ4rTtK+NVYyOCJOrjLyF4svG4Wj33G0qJqGA1shTuNOVeMXDM2m+eP/984k288XsE3rR06ZET2jtrdkt9J4prOw/1BQff7wsHAAUtOHk4EuYQQFmZSbFA1f8UX+C/bXXDzR8VuYMEC1GRfbKlfRiA09v6fmBsxq5wJIoOfmYZjAtER4GUEdE8OuckZ4LBviM1aauDUBxL/yXIbLkPJXItvCZpz2Coms7IUaJ3UIwAxUSS9kKk/pZkHXY9PxcCN29Xt8mhsm6gaMbQTbzpCWvicGiqd01eG7UCJsn9yvZMra77aZ2dg+9upmpcyFJFRV2fgg2nlL/HmWKkEO/4Ir+2VWhw3MInuCrxicQV7zSutO0VF+OworWYwD3s1/rYXhm0FfE1IeBXswf2KbmJA6Wz2yYu4MNFih33VPWS0waEhAixg+qlIjJexP+iszpOeNasVifRBjtASYhnn9wX4Vx+F6C0plkgl8tPeprIE3etTKgcYSa3oY+M5jGrh6aRSOSUHki18A+MiOWP1ixZQgAILbt0t3eguf7fxtKCmRG/Xc=
  local-dir: target/cluecumber-report
  on:
    branch: master

